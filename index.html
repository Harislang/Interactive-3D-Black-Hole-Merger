<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive 3D Black Hole Merger Simulation - Watch two black holes spiral together and merge with realistic physics and gravitational effects">
    <meta name="keywords" content="black hole, merger, simulation, physics, gravitational waves, astronomy, astrophysics, 3D visualization">
    <meta name="author" content="Black Hole Merger Simulation">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Black Hole Merger Simulation">
    <meta property="og:description" content="Experience the violent cosmic dance of merging black holes with realistic physics and stunning visual effects">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://your-domain.vercel.app/preview.png">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Black Hole Merger Simulation">
    <meta name="twitter:description" content="Interactive 3D visualization of black holes merging with gravitational lensing and waves">
    
    <title>Black Hole Merger Simulation | Interactive 3D Visualization</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Main Canvas Container -->
    <div id="canvas-container"></div>

    <!-- UI Overlay -->
    <div class="ui-overlay">
        <!-- Title and Info -->
        <div class="absolute top-4 right-4 z-10 text-right">
            <h1 class="text-2xl font-bold text-white/90 mb-1">Black Hole Merger</h1>
            <p class="text-sm text-white/60">Interactive 3D Simulation</p>
        </div>

        <!-- Control Panel -->
        <div class="absolute top-4 left-4 z-10 flex flex-col gap-4 max-h-[calc(100vh-2rem)]">
            <div id="controlsContainer" class="glassmorphic-panel p-5 rounded-xl shadow-2xl w-full max-w-xs sm:max-w-sm md:max-w-[320px] control-panel overflow-y-auto">
                <!-- Panel Header -->
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-white/90">Controls</h2>
                    <div class="flex items-center gap-2">
                        <button id="playPauseBtn" class="p-2 btn-icon" title="Pause" aria-label="Play/Pause">
                            <svg id="pauseIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                            </svg>
                            <svg id="playIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                            </svg>
                        </button>
                        <button id="resetBtn" class="p-2 btn-icon" title="Reset Simulation" aria-label="Reset">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" />
                            </svg>
                        </button>
                        <button id="toggleControlsBtn" class="p-2 btn-icon" title="Minimize" aria-label="Toggle Panel">
                            <svg id="minimizeIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
                            </svg>
                            <svg id="maximizeIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Collapsible Content -->
                <div id="collapsible-content">
                    <!-- Status Display -->
                    <div class="mb-5 mt-1">
                        <h3 class="text-sm font-medium text-white/70 mb-2">Simulation Phase</h3>
                        <div class="w-full bg-black/20 rounded-full h-2.5">
                            <div id="progressBar" class="bg-gradient-to-r from-sky-400 to-indigo-500 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                        </div>
                        <div class="text-center mt-2">
                            <span id="statusText" class="text-lg font-semibold text-sky-300">Initializing...</span>
                        </div>
                    </div>

                    <!-- Physics Information -->
                    <div class="mb-5 p-3 bg-black/20 rounded-lg">
                        <h3 class="text-sm font-medium text-white/70 mb-2">System Properties</h3>
                        <div class="space-y-1 text-xs text-white/60">
                            <div class="flex justify-between">
                                <span>Total Mass:</span>
                                <span id="totalMassDisplay" class="text-white/80">--</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Orbital Period:</span>
                                <span id="orbitalPeriodDisplay" class="text-white/80">--</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Separation:</span>
                                <span id="separationDisplay" class="text-white/80">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Control Sliders -->
                    <div class="space-y-5">
                        <div>
                            <div class="flex justify-between items-center text-sm text-white/80 mb-1">
                                <label for="massRatioSlider">Mass Ratio (M₂/M₁)</label>
                                <span id="massRatioValue">0.80</span>
                            </div>
                            <input type="range" id="massRatioSlider" min="0.1" max="1.0" step="0.01" value="0.8" class="slider">
                        </div>
                        <div>
                            <div class="flex justify-between items-center text-sm text-white/80 mb-1">
                                <label for="separationSlider">Initial Separation</label>
                                <span id="separationValue">50</span>
                            </div>
                            <input type="range" id="separationSlider" min="25" max="80" step="1" value="50" class="slider">
                        </div>
                        <div>
                            <div class="flex justify-between items-center text-sm text-white/80 mb-1">
                                <label for="timeScaleSlider">Simulation Speed</label>
                                <span id="timeScaleValue">1.0x</span>
                            </div>
                            <input type="range" id="timeScaleSlider" min="0.1" max="3.0" step="0.1" value="1.0" class="slider">
                        </div>
                    </div>

                    <!-- Visual Settings -->
                    <div class="mt-5 pt-4 border-t border-white/10">
                        <h3 class="text-sm font-medium text-white/70 mb-3">Visual Effects</h3>
                        <div class="space-y-3">
                            <label class="flex items-center justify-between text-sm text-white/70 cursor-pointer">
                                <span>Gravitational Lensing</span>
                                <input type="checkbox" id="lensingToggle" checked class="toggle-checkbox">
                            </label>
                            <label class="flex items-center justify-between text-sm text-white/70 cursor-pointer">
                                <span>Gravitational Waves</span>
                                <input type="checkbox" id="wavesToggle" checked class="toggle-checkbox">
                            </label>
                            <label class="flex items-center justify-between text-sm text-white/70 cursor-pointer">
                                <span>Accretion Disks</span>
                                <input type="checkbox" id="disksToggle" checked class="toggle-checkbox">
                            </label>
                        </div>
                    </div>

                    <!-- Info Button -->
                    <div class="mt-5 pt-4 border-t border-white/10">
                        <button id="infoBtn" class="w-full py-2 px-4 bg-white/10 hover:bg-white/20 rounded-lg text-sm text-white/80 transition-all">
                            About This Simulation
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Info Modal -->
        <div id="infoModal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 bg-black/70 backdrop-blur-sm">
            <div class="glassmorphic-panel p-6 rounded-2xl max-w-2xl max-h-[80vh] overflow-y-auto">
                <div class="flex justify-between items-start mb-4">
                    <h2 class="text-2xl font-bold text-white/90">About Black Hole Merger Simulation</h2>
                    <button id="closeInfoBtn" class="p-2 btn-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </button>
                </div>
                <div class="space-y-4 text-white/80">
                    <p>
                        This simulation demonstrates the merger of two black holes, one of the most violent events in the universe. 
                        It includes realistic physics and visual effects based on Einstein's General Relativity.
                    </p>
                    <h3 class="text-lg font-semibold text-white/90">Features:</h3>
                    <ul class="list-disc list-inside space-y-1 ml-2">
                        <li>Gravitational physics with energy loss due to gravitational waves</li>
                        <li>Three phases: Inspiral, Merger, and Ringdown</li>
                        <li>Gravitational lensing effect that warps background stars</li>
                        <li>Accretion disk visualization with tidal disruption</li>
                        <li>Visual representation of gravitational waves</li>
                        <li>Conservation of momentum and mass-energy</li>
                    </ul>
                    <h3 class="text-lg font-semibold text-white/90">Controls:</h3>
                    <ul class="list-disc list-inside space-y-1 ml-2">
                        <li>Click and drag to rotate the camera</li>
                        <li>Scroll to zoom in/out</li>
                        <li>Use sliders to adjust simulation parameters</li>
                        <li>Toggle visual effects on/off</li>
                    </ul>
                    <p class="text-sm text-white/60 pt-2">
                        Created with Three.js and WebGL. Inspired by LIGO's gravitational wave detections.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 z-50 flex items-center justify-center bg-black">
        <div class="text-center">
            <div class="mb-4">
                <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-sky-400"></div>
            </div>
            <h2 class="text-xl font-bold text-white/90 mb-2">Loading Simulation</h2>
            <p class="text-sm text-white/60">Initializing black holes...</p>
        </div>
    </div>

    <!-- Import Map for ES Modules -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.163.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.163.0/examples/jsm/"
        }
    }
    </script>

    <!-- Main Script -->
    <script type="module" src="script.js"></script>
</body>
</html>